{"version":3,"sources":["all.js"],"names":["data","axios","get","then","response","init","c3Chart","cardArea","document","querySelector","filterNum","cards","amount","forEach","item","content","area","imgUrl","rate","name","description","group","price","innerHTML","filter","cardContent","addEventListener","e","target","value","btn","tikketName","obj","id","length","parseInt","push","options","alert","event","preventDefault","newObj","undefined","newData","Object","keys","arr","chart","c3","generate","bindto","columns","type","colors","donut","title","label","show","padAngle","width"],"mappings":"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","file":"all.js","sourcesContent":["let data = [];\n\n// Axios\naxios.get('https://raw.githubusercontent.com/hexschool/js-training/main/travelApi.json')\n  .then(function (response) {\n    data = response.data.data;\n\n    init();\n    c3Chart();\n  })\n\n\n//  選取下方卡片資料區\nconst cardArea = document.querySelector(\".cardArea\");\n// 選取篩選資料筆數\nconst filterNum = document.querySelector('.filterNum');\n\n// init\nfunction init() {\n  // 卡片資料區初始化\n  let cards = \"\";\n  // 篩選筆數初始化\n  let amount = 0;\n\n  // 遍歷當前所有資料 => 初始化\n  data.forEach(function (item) {\n    // 宣告、設定卡片樣板，遍歷後累積成卡片資料區的內容\n    let content = `\n      <div class=\"relative rounded-xl shadow-md\">\n      <h3 class=\"bg-primaryColor-light text-white px-5 py-2 w-24  text-lg text-center rounded-r-lg absolute -top-5\">\n        ${item.area}\n      </h3>\n      <img src=\"${item.imgUrl}\" alt=\"${item.area}\" class=\"w-full h-190 object-cover rounded-t-lg\">\n      <p class=\"bg-primaryColor-dark w-10 text-white text-center rounded px-2 absolute top-44\">${item.rate}</p>\n      <div class=\"rounded-b-lg\">\n        <div class=\"flex flex-col justify-between  h-336 pt-5 pb-4 px-7\">\n          <div>\n            <h4 class=\"text-2xl text-priamryColor border-b-4 border-primaryColor leading-10 mb-4\">${item.name}</h4>\n            <p class=\"text-gray-500 leading-7 mb-8\">\n              ${item.description}\n            </p>\n          </div>\n          <div class=\"flex justify-between items-center text-primaryColor font-medium\">\n            <p>\n              <i class=\"fas fa-exclamation-circle mr-1\"></i>\n              剩下最後 ${item.group} 組\n            </p>\n            <div class=\"flex items-center text-primary-Color\">\n              <p class=\"mr-1\">TWD</p>\n              <h5 class=\"text-4xl\">${item.price}</h5>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n    `\n    // 卡片資料區加入遍歷過的 content 內容\n    cards += content;\n\n    // 計算篩選筆數\n    amount += 1;\n  })\n\n  // 修改卡片資料區 html 資料\n  cardArea.innerHTML = cards;\n  // 把 amount 累積計算後的筆數修改到html上\n  filterNum.innerHTML = `本次篩選共 ${amount} 筆資料`;\n}\n\n\n\n\n// ---下方篩選器---\nconst filter = document.querySelector('#filter');\n\n// 卡片內容樣板，拉出來到全域環境\nfunction cardContent(item) {\n\n}\n\n//  Filter 篩選器 - 第 1 層 監聽\nfilter.addEventListener('change', function (e) {\n  // 卡片資料區初始化\n  let cards = \"\";\n  // 篩選筆數初始化\n  let amount = 0;\n\n  // 第 2 層 forEach 遍歷資料\n  data.forEach(function (item) {\n\n    // 宣告、設定卡片樣板，遍歷後累積成卡片資料區的內容\n    let content = `\n      <div class=\"relative rounded-xl shadow-md\">\n      <h3 class=\"bg-primaryColor-light text-white px-5 py-2 w-24  text-lg text-center rounded-r-lg absolute -top-5\">\n        ${item.area}\n      </h3>\n      <img src=\"${item.imgUrl}\" alt=\"${item.area}\" class=\"w-full h-190 object-cover rounded-t-lg\">\n      <p class=\"bg-primaryColor-dark w-10 text-white text-center rounded px-2 absolute top-44\">${item.rate}</p>\n      <div class=\"rounded-b-lg\">\n        <div class=\"flex flex-col justify-between  h-336 pt-5 pb-4 px-7\">\n          <div>\n            <h4 class=\"text-2xl text-priamryColor border-b-4 border-primaryColor leading-10 mb-4\">${item.name}</h4>\n            <p class=\"text-gray-500 leading-7 mb-8\">\n              ${item.description}\n            </p>\n          </div>\n          <div class=\"flex justify-between items-center text-primaryColor font-medium\">\n            <p>\n              <i class=\"fas fa-exclamation-circle mr-1\"></i>\n              剩下最後 ${item.group} 組\n            </p>\n            <div class=\"flex items-center text-primary-Color\">\n              <p class=\"mr-1\">TWD</p>\n              <h5 class=\"text-4xl\">${item.price}</h5>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n    `;\n\n    // 第三層 if 條件判斷\n    if (e.target.value === item.area) {\n      cards += content;\n      amount += 1;\n    } else if (e.target.value === \"all\") {\n      cards += content;\n      amount += 1;\n    }\n  })\n  cardArea.innerHTML = cards;\n  filterNum.innerHTML = `本次篩選共 ${amount} 筆資料`;\n});\n\n\n\n// ---上方新增套票---\n\n// 按鈕選取做監聽\nconst btn = document.querySelector('.btn')\n\n// 宣告變數 => 取值用\nconst tikketName = document.querySelector('.tikketName');\nconst imgUrl = document.querySelector('.imgUrl');\nconst area = document.querySelector('.area');\nconst price = document.querySelector('.price');\nconst group = document.querySelector('.group');\nconst rate = document.querySelector('.rate');\nconst description = document.querySelector('.description');\n\n//  監聽事件\nbtn.addEventListener('click', function (e) {\n\n  // 先判斷星級是否正確\n  if (rate.value >= 1 && rate.value <= 10) {\n    // 星級正確\n\n    // 宣告一個物件 => 之後要符合 data 資料結構\n    let obj = {};\n\n    // 將 obj 賦值，名稱結構比照 data\n    obj.id = data.length;\n    obj.name = tikketName.value;\n    obj.imgUrl = imgUrl.value;\n    obj.area = area.value;\n    obj.price = parseInt(price.value);\n    obj.group = parseInt(group.value);\n    obj.rate = parseInt(rate.value);\n    obj.description = description.value;\n\n    // 把建立好的 obj 物件 push 到 data陣列資料裡面\n    data.push(obj);\n\n    // 再次執行初始化，重新跑過 data內的資料，然後渲染 HTML\n    init();\n\n    // 重新跑過C3.js圖表\n    c3Chart();\n\n    // 重置filter到全部地區\n    filter.value = filter.options[1].value;\n\n  } else {\n    // 星級錯誤\n    alert('星級填寫錯誤');\n    event.preventDefault();\n    return\n  }\n\n\n  // 重置輸入欄位的值\n  tikketName.value = \"\";\n  imgUrl.value = \"\";\n  area.value = \"\";\n  price.value = \"\";\n  group.value = \"\";\n  rate.value = \"\";\n  description.value = \"\";\n\n  // 取消input type=submit 原本預設的 post 行為\n  event.preventDefault();\n})\n\nfunction c3Chart() {\n  // 篩選資料\n\n  let newObj = {};\n  data.forEach(function (item) {\n    if (newObj[item.area] == undefined) {\n      newObj[item.area] = 1;\n    } else {\n      newObj[item.area] += 1;\n    }\n  });\n\n\n  // 處理資料\n  let newData = [];\n  let area = Object.keys(newObj);\n  area.forEach(function (item) {\n    let arr = [];\n    arr.push(item);\n    arr.push(newObj[item]);\n    newData.push(arr);\n  });\n\n\n  // 套入C3.js\n  let chart = c3.generate({\n    bindto: '#chart',\n    data: {\n      columns: newData,\n      type: \"donut\",\n      colors: {\n        \"台北\": \"#00807E\",\n        \"台中\": \"#64C3BF\",\n        \"高雄\": \"#007572\",\n      }\n    },\n    donut: {\n      title: \"套票地區比重\",\n      label: {\n        show: false\n      },\n      padAngle: .03,\n      width: 20\n    }\n  });\n};\n"]}